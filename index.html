<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>


    <script src="node_modules/jquery/dist/jquery.min.js"></script>

    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <!--<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>-->

    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <link rel="stylesheet" type="text/css" href="styles/weather-animated.css">
    <link rel="stylesheet" type="text/css" href="styles/font.css">
    <link rel="stylesheet" type="text/css" href="styles/weather-icons.css">

</head>

<body>
    <script src="services/weather.js"></script>
    <script src="services/time.js"></script>
    <script src="services/weather-icon.js"></script>


    <div class="container-fluid">
        <div class="row">
            <!-- left pannel -->
            <div class="col">
                <div class="weather-content">
                    <div class="display-3 text-white">
                        <div id="locationText">
                            Esneux
                        </div>
                    </div>

                    <div class="container-fluid">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="display-5 text-white">
                                        <div id="weatherDescription"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div id="weatherIcon">
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div id="temperatureText"></div>
                            </div>
                            <div class="col">
                                <div class="row bottom-align">
                                    <div class="col-md-4">
                                        <div id="humidityIcon">
                                            <i class="wi wi-humidity"></i>
                                        </div>
                                        <div id="humidityText">
                                            <span id="humidityText"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="details-content">
                    <div id="windIcon">
                        <i class="wi wi-strong-wind"></i>
                    </div>
                    <div id="windText"></div>

                    <div id="sunriseIcon">
                        <i class="wi wi-sunrise"></i>
                    </div>
                    <div id="sunriseText"></div>

                    <div id="sunsetIcon">
                        <i class="wi wi-sunset"></i>
                    </div>
                    <div id="sunsetText"></div>


                </div>​

                <div class="forecast-content">
                    <div id="title">Forecast</div>
                </div>
            </div>
            <!-- center pannel -->
            <div class="col">
            </div>
            <!-- right pannel -->
            <div class="col">
                <div id="dateText"></div>
                <div id="timeText"></div>
            </div>
        </div>
    </div>


    <script>
        refreshTime();

        getWeather().then(function (data) {
            updateWeatherIcon(data.weather[0].icon);
            updateTemperature(data.main.temp);
            updateHumidity(data.main.humidity);
            updateDescription(data.weather[0].description);
            updateWind(data.wind.speed);
            updateSunrise(data.sys.sunrise);
            updateSunset(data.sys.sunset);
            console.log(data);
        });

        getForecast().then(function (data) {
            updateForecast(data);
        });


        function refreshTime() {
            var timeArray = getCurrentTime();
            document.getElementById('timeText').innerHTML = timeArray[0] + "<div id=\"superscript\">" + timeArray[1] + "</div>";
            document.getElementById('dateText').innerHTML = getCurrentDate();
            setTimeout(refreshTime, 500);
        }

        function updateWeatherIcon(value) {
            document.getElementById('weatherIcon').innerHTML = getWeatherIcon(value);
        }

        function updateTemperature(value) {
            value = value.toFixed(1);
            document.getElementById('temperatureText').innerHTML = value + "°";
        }

        function updateDescription(value) {
            document.getElementById('weatherDescription').innerHTML = value;
        }

        function updateHumidity(value) {
            document.getElementById('humidityText').innerHTML = value + "%";
        }

        function updateWind(value) {
            value = value * 3.6; // convert m/s to km/h
            value = value.toFixed(1);
            document.getElementById('windText').innerHTML = value + " km/h";
        }

        function updateSunrise(value) {
            document.getElementById('sunriseText').innerHTML = formatEpochDate(value);
        }

        function updateSunset(value) {
            document.getElementById('sunsetText').innerHTML = formatEpochDate(value);
        }

        function updateForecast(value) {
            // create view

        }
    </script>


</body>

</html>